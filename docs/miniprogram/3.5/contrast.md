---
sidebar_position: 7
title: 3.0与3.5对比
---

本文将介绍3.0.0版本与3.5.0版本的差异，方便您充分了解差异并放心的升级。文中将仅列出差异之处，共同之处将不再赘述。

## 简介

从 `3.5.0` 正式版发布开始，我们的小程序SDK将正式进入新架构时代。

将各个主模块进行独立拆分，方法调用都是单向的，这大大降低了代码的耦合度，减少了出现缺陷的风险。

功能上，我们以插件的形式进行拆分，可以做到插拔对基础模块运行无影响，这对于减小SDK占用大小也有很大的意义。

由于我们只是在架构层面进行调整，功能上和使用上几乎与旧版本无异，所以我们并没有直接进入4.0，而是选择了一个3到4的中间值3.5来进行区分。

如果您目前使用的是3.x的测量协议版本，可以完全不用担心兼容问题，具体升级方式请见[升级到3.5](/docs/miniprogram/3.5/upgrade)。

### 关于3.0旧版本

旧版本我们也会继续维护，但仅限于问题的修复。

## 差异点
### 初始化
**移除项：** `usePlugin`、`vue`、`setConfig`方法。

> 初始化配置项 `usePlugin` 字段废弃；未使用无影响，已使用直接移除即可。
>
> 初始化配置项 `vue` 字段废弃；使用其他字段代替。
>
> 初始化方法 `setConfig` 废弃，仅支持通过 `init` 方法进行初始化；因为它容易歧义误导使用。

**新增项：** `mpvue`、`wepy`、`uniVue`、`taroVue`、`singleSend`。

> 新增 `wepy`、`mpvue`、`uniVue`、`taroVue` 配置项字段；用于准确传入不同框架的实例。
>
> 新增 `singleSend` 字段；用于判断事件是否需要单发。

## 数据采集API
**移除项：** `collectImp`方法。

> `collectImp`方法废弃；半自动曝光事件优化为自动注册，未使用无影响，已使用直接移除即可。

**新增项：** `getOption`、`setOption`

> 新增 `getOption` 方法；用于获取当前SDK配置项状态。[参考文档](/3.5/commonlyApi#8获取sdk当前配置getoption)
>
> 新增 `setOption` 方法；用于统一动态设置SDK配置项。[参考文档](/docs/miniprogram/3.5/commonlyApi#动态配置接口)

## 功能点优化

1、带有 `autoplay` 属性且值为 `true` 的原生组件（例如：swiper、video）产生的change事件会被自动忽略。

2、半自动曝光事件将无需手动注册，改为自动注册（触发时机为页面onShow）。

3、半自动曝光事件的曝光逻辑为：只要从不可见区域到可见区域即计为一次曝光并上报。

## 不兼容改动

1、半自动曝光事件参数配置方式[参考文档](/docs/miniprogram/3.5/internally#半自动曝光事件)

