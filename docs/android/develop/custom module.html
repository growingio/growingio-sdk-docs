<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.3">
<link rel="alternate" type="application/rss+xml" href="/growingio-sdk-docs/blog/rss.xml" title="ä¸€ç«™å¼æ•°æ®å¢é•¿å¼•æ“ Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/growingio-sdk-docs/blog/atom.xml" title="ä¸€ç«™å¼æ•°æ®å¢é•¿å¼•æ“ Blog Atom Feed"><title data-react-helmet="true">è‡ªå®šä¹‰æ¨¡å— | ä¸€ç«™å¼æ•°æ®å¢é•¿å¼•æ“</title><meta data-react-helmet="true" property="og:url" content="https://growingio.github.io/growingio-sdk-docs/growingio-sdk-docs/docs/android/develop/custom module"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="è‡ªå®šä¹‰æ¨¡å— | ä¸€ç«™å¼æ•°æ®å¢é•¿å¼•æ“"><meta data-react-helmet="true" name="description" content="è‡ªå®šä¹‰æ¨¡å—å¯ä»¥è®©ä½ ä½¿ç”¨è‡ªå·±çš„ä»£ç å®ç°çš„åŠŸèƒ½æ¥æ›¿æ¢ç°æœ‰çš„æ¨¡å—åŠŸèƒ½ï¼Œç°æœ‰çš„æ¨¡å—åŠŸèƒ½å¯ä»¥å‚è€ƒ æ¨¡å—åˆ—è¡¨"><meta data-react-helmet="true" property="og:description" content="è‡ªå®šä¹‰æ¨¡å—å¯ä»¥è®©ä½ ä½¿ç”¨è‡ªå·±çš„ä»£ç å®ç°çš„åŠŸèƒ½æ¥æ›¿æ¢ç°æœ‰çš„æ¨¡å—åŠŸèƒ½ï¼Œç°æœ‰çš„æ¨¡å—åŠŸèƒ½å¯ä»¥å‚è€ƒ æ¨¡å—åˆ—è¡¨"><link data-react-helmet="true" rel="shortcut icon" href="/growingio-sdk-docs/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://growingio.github.io/growingio-sdk-docs/growingio-sdk-docs/docs/android/develop/custom module"><link data-react-helmet="true" rel="alternate" href="https://growingio.github.io/growingio-sdk-docs/growingio-sdk-docs/docs/android/develop/custom module" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://growingio.github.io/growingio-sdk-docs/growingio-sdk-docs/docs/android/develop/custom module" hreflang="x-default"><link rel="stylesheet" href="/growingio-sdk-docs/assets/css/styles.04ca4f6f.css">
<link rel="preload" href="/growingio-sdk-docs/assets/js/runtime~main.76f9e978.js" as="script">
<link rel="preload" href="/growingio-sdk-docs/assets/js/main.3a3e87bf.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/growingio-sdk-docs/"><img src="/growingio-sdk-docs/img/logo.svg" alt="GrowingIO Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/growingio-sdk-docs/img/logo.svg" alt="GrowingIO Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title"></b></a><a class="navbar__item navbar__link navbar__link--active" href="/growingio-sdk-docs/docs">æ–‡æ¡£</a><a class="navbar__item navbar__link" href="/growingio-sdk-docs/blog">åšå®¢</a></div><div class="navbar__items navbar__items--right"><a href="https://www.growingio.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>å®˜ç½‘<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/growingio" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ğŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ğŸŒ</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/growingio-sdk-docs/"><img src="/growingio-sdk-docs/img/logo.svg" alt="GrowingIO Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/growingio-sdk-docs/img/logo.svg" alt="GrowingIO Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title"></b></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/growingio-sdk-docs/docs">æ–‡æ¡£</a></li><li class="menu__list-item"><a class="menu__link" href="/growingio-sdk-docs/blog">åšå®¢</a></li><li class="menu__list-item"><a href="https://www.growingio.com/" target="_blank" rel="noopener noreferrer" class="menu__link"><span>å®˜ç½‘<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="menu__list-item"><a href="https://github.com/growingio" target="_blank" rel="noopener noreferrer" class="menu__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu menu--responsive thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA" aria-label="Sidebar navigation"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/growingio-sdk-docs/docs">æ–°åŠŸèƒ½ä»‹ç»</a></li><li class="menu__list-item"><a class="menu__link" href="/growingio-sdk-docs/docs/SDK OVERVIEW">SDK ç®€ä»‹</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Android SDK</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">åŸºç¡€ä½¿ç”¨</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/growingio-sdk-docs/docs/android/base/Getting Started">å¦‚ä½•é›†æˆ</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/growingio-sdk-docs/docs/android/base/Configuration">åˆå§‹åŒ–é…ç½®</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/growingio-sdk-docs/docs/android/base/api">æ•°æ®é‡‡é›†API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/growingio-sdk-docs/docs/android/base/debug">SDKè°ƒè¯•</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">è¿›é˜¶æ‹“å±•</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/growingio-sdk-docs/docs/android/develop/intro">å‰è¨€</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/growingio-sdk-docs/docs/android/develop/coutom sdk">è‡ªå®šä¹‰ SDK</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/growingio-sdk-docs/docs/android/develop/custom module">è‡ªå®šä¹‰æ¨¡å—</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/growingio-sdk-docs/docs/android/develop/develop">äºŒæ¬¡å¼€å‘</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/growingio-sdk-docs/docs/android/question">å¸¸è§é—®é¢˜</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">iOS SDK</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">åŸºç¡€ä½¿ç”¨</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/growingio-sdk-docs/docs/ios/base/Getting_Started">å¦‚ä½•é›†æˆ</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/growingio-sdk-docs/docs/ios/base/Configuration">åˆå§‹åŒ–é…ç½®</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/growingio-sdk-docs/docs/ios/base/api">æ•°æ®é‡‡é›†API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/growingio-sdk-docs/docs/ios/base/debug">SDKè°ƒè¯•</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">è¿›é˜¶æ‹“å±•</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/growingio-sdk-docs/docs/ios/develop/intro">å‰è¨€</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/growingio-sdk-docs/docs/ios/develop/custom_sdk">è‡ªå®šä¹‰ SDK</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/growingio-sdk-docs/docs/ios/question">å¸¸è§é—®é¢˜</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Web JS SDK</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">åŸºç¡€ä½¿ç”¨</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/growingio-sdk-docs/docs/webjs/base/getting_started">å¦‚ä½•é›†æˆ</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/growingio-sdk-docs/docs/webjs/base/configuration">åˆå§‹åŒ–é…ç½®</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/growingio-sdk-docs/docs/webjs/base/api">æ•°æ®é‡‡é›†API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/growingio-sdk-docs/docs/webjs/base/debug">SDKè°ƒè¯•</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="-1">è¿›é˜¶æ‹“å±•</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/growingio-sdk-docs/docs/webjs/develop/intro">å‰è¨€</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/growingio-sdk-docs/docs/webjs/develop/custom_sdk">è‡ªå®šä¹‰SDK</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/growingio-sdk-docs/docs/webjs/develop/plugin_dev">æ’ä»¶å¼€å‘æŒ‡å—</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/growingio-sdk-docs/docs/webjs/plugins">å†…ç½®æ’ä»¶</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">ç¬¬ä¸‰æ–¹ SDK</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/growingio-sdk-docs/docs/other/Java SDK">JAVA SDK</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/growingio-sdk-docs/docs/other/PHP SDK">PHP SDK</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/growingio-sdk-docs/docs/other/Flutter SDK">Flutter SDK</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/growingio-sdk-docs/docs/other/React Native">React Native SDK</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/growingio-sdk-docs/docs/debug">SDKè°ƒè¯•</a></li><li class="menu__list-item"><a class="menu__link" href="/growingio-sdk-docs/docs/Measurement Protocol">æµ‹é‡åè®®</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="markdown"><header><h1 class="h1Heading_27L5">è‡ªå®šä¹‰æ¨¡å—</h1></header><p>è‡ªå®šä¹‰æ¨¡å—å¯ä»¥è®©ä½ ä½¿ç”¨è‡ªå·±çš„ä»£ç å®ç°çš„åŠŸèƒ½æ¥æ›¿æ¢ç°æœ‰çš„æ¨¡å—åŠŸèƒ½ï¼Œç°æœ‰çš„æ¨¡å—åŠŸèƒ½å¯ä»¥å‚è€ƒ <a href="/growingio-sdk-docs/docs/android/develop/coutom sdk">æ¨¡å—åˆ—è¡¨</a></p><p>åœ¨ GrowingIO SDK ä¸­ï¼Œæ¨¡å—åŠ è½½å…·æœ‰å”¯ä¸€æ€§â€”â€”æ¯ä¸€ä¸ªè¾“å…¥æºä»…èƒ½æ³¨å†Œä¸€ä¸ªæ¨¡å—ï¼Œä¸”è¯¥æ¨¡å—ä¼šè¢«åæ³¨å†Œçš„æ¨¡å—è¦†ç›–ã€‚</p><p><img alt="custom module" src="/growingio-sdk-docs/assets/images/custom_module-d11f190d898635f0e1774afe66e99d39.png"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="å¦‚ä½•è‡ªå®šä¹‰ä¸€ä¸ªæ¨¡å—"></a>å¦‚ä½•è‡ªå®šä¹‰ä¸€ä¸ªæ¨¡å—<a class="hash-link" href="#å¦‚ä½•è‡ªå®šä¹‰ä¸€ä¸ªæ¨¡å—" title="Direct link to heading">#</a></h2><p>ä½œä¸ºä¸€ä¸ªå¯æ‰©å±•çš„SDK, è¦æ·»åŠ æˆ–æ›¿æ¢ä¸€ç§æ–°çš„æ¨¡å—æ”¯æŒ, ä½ éœ€è¦æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ¥æ‰§è¡Œ(ä»¥æ›¿æ¢ç½‘ç»œåº“ä¸ºä¾‹)</p><ol><li>å®ç°ä¸€ä¸ª ModelLoader</li><li>å®ç°ä¸€ä¸ª DataFetcher , å¯ä»¥è¢«å®šä¹‰çš„ ModelLoader è¿”å›</li><li>å®ç°ä¸€ä¸ª ModelLoaderFactory</li><li>å°†ä½ çš„æ–° ModelLoader æ³¨å†Œåˆ°sdk, ä½¿ç”¨ <code>@GIOLibraryModule</code></li></ol><p>æ¥ä¸‹æ¥ä»¥è‡ªå®šä¹‰ä¸€ä¸ª okhttp3 çš„ç½‘ç»œè¯·æ±‚è‡ªå®šä¹‰æ¨¡å—æ¥ä¸¾ä¸ªä¾‹ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="æ·»åŠ å¿…è¦çš„ä¾èµ–"></a>æ·»åŠ å¿…è¦çš„ä¾èµ–<a class="hash-link" href="#æ·»åŠ å¿…è¦çš„ä¾èµ–" title="Direct link to heading">#</a></h3><p>åœ¨ app/module çš„ build.gradle ä¸‹æ·»åŠ åŸºç¡€åº“æ ¸å¿ƒï¼ˆæ— åŸ‹ç‚¹å’ŒåŸ‹ç‚¹éƒ½å¯ï¼‰ï¼Œæ³¨è§£åº“å’Œæ³¨è§£è§£é‡Šå™¨.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly groovy"><pre tabindex="0" class="prism-code language-groovy codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">dependencies {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    //æ— åŸ‹ç‚¹åŸºç¡€åº“</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    implementation &#x27;com.growingio.android:autotracker-core:3.2.1&#x27;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    //æ³¨è§£è§£æ</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    implementation &#x27;com.growingio.android:annotation:3.2.1&#x27;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    annotationProcessor &#x27;com.growingio.android:compiler:3.2.1&#x27;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="ç¼–å†™ä¸€ä¸ªmodelloader"></a>ç¼–å†™ä¸€ä¸ªModelLoader<a class="hash-link" href="#ç¼–å†™ä¸€ä¸ªmodelloader" title="Direct link to heading">#</a></h3><p>ç¬¬ä¸€æ­¥æ˜¯å®ç°ä¸€ä¸ª <code>ModelLoader</code> æ¥å£. åœ¨å¼€å§‹ä¹‹å‰, æˆ‘ä»¬éœ€è¦å†³å®šä¸¤ä»¶äº‹æƒ…ï¼š</p><ol><li>æˆ‘ä»¬è¦å¤„ç†ä»€ä¹ˆç±»å‹çš„æ¨¡å‹( Model )?</li><li>å¯¹äºé‚£ç§æ¨¡å‹æˆ‘ä»¬åº”è¯¥äº§å‡ºä»€ä¹ˆç±»å‹çš„æ•°æ®( Data )?</li></ol><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­, æˆ‘ä»¬å¸Œæœ›å¤„ç†ç½‘ç»œè¯·æ±‚, å› ä¸ºæ›¿æ¢å†…ç½®æ¡†æ¶, æ‰€ä»¥ Model æ˜¯å·²ç»é™åˆ¶äº†çš„ç±»å‹ <code>EventUrl</code>.
è€Œä» <code>EventUrl</code> ä¸­äº§å‡ºçš„ <code>EventResponse</code> æ•°æ®æ˜¯æ¨¡å—éœ€è¦è¿”å›ç»™SDKçš„æ•°æ®ã€‚</p><p>åœ¨å·²ç»çŸ¥é“ <code>Model</code> å’Œ <code>Data</code> ç±»å‹çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°±èƒ½å»ºç«‹ä¸€ä¸ª <code>DataLoader</code> ç±»æ¥å—æ­£ç¡®çš„å‚æ•°ç±»å‹å¹¶è¿”å›é»˜è®¤å€¼ã€‚</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">public class OkHttpDataLoader implements ModelLoader&lt;EventUrl, EventResponse&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final Call.Factory client;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public OkHttpDataLoader(Call.Factory client) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.client = client;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public LoadData&lt;EventResponse&gt; buildLoadData(EventUrl eventUrl) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new LoadData&lt;&gt;(new OkHttpDataFetcher(client, eventUrl));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static class Factory implements ModelLoaderFactory&lt;EventUrl, EventResponse&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        private static volatile Call.Factory sInternalClient;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        private final Call.Factory client;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        private static final int DEFAULT_CONNECT_TIMEOUT = 5;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        private static final int DEFAULT_READ_TIMEOUT = 10;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        private static Call.Factory getsInternalClient() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (sInternalClient == null) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                synchronized (Factory.class) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    if (sInternalClient == null) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                        sInternalClient = new OkHttpClient.Builder()</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                                .connectTimeout(DEFAULT_CONNECT_TIMEOUT, TimeUnit.SECONDS)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                                .readTimeout(DEFAULT_READ_TIMEOUT, TimeUnit.SECONDS)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                                .build();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            return sInternalClient;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        public Factory() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            this(getsInternalClient());</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        public Factory(Call.Factory client) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            this.client = client;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Override</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        public ModelLoader&lt;EventUrl, EventResponse&gt; build() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            return new OkHttpDataLoader(client);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>å…¶ä¸­ <code>Factory</code> ä½œç”¨ï¼š  </p><ol><li>æä¾›äº†ä¸€ä¸ªé™æ€çš„ <code>OkHttpClient</code>ï¼Œå¯ä»¥é¿å…æ¯æ¬¡è¯·æ±‚éƒ½éœ€è¦é‡æ–°åˆ›å»ºã€‚</li><li>æ¨¡å—æ³¨å†Œæ—¶æä¾›æ¨¡å—çš„å…·ä½“å®ç°ç±»ï¼Œå³æä¾› <code>ModelLoader</code>.</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="ç¼–å†™datafetcher"></a>ç¼–å†™DataFetcher<a class="hash-link" href="#ç¼–å†™datafetcher" title="Direct link to heading">#</a></h3><p>å’Œ <code>ModelLoader</code> ç±»ä¼¼, <code>DataFetcher</code> æ¥å£æ˜¯æ³›å‹çš„, å®ƒè¦æ±‚æˆ‘ä»¬æŒ‡å®šæ‰€æœŸå¾…çš„è¿”å›ç±»å‹ï¼Œåœ¨ç½‘ç»œè¯·æ±‚æ¨¡å—é‡Œé¢å³ä¸º <code>EventResponse</code>
è¿™æ ·å­å¯ä»¥ç«‹é©¬å¾—åˆ°ä¸€ä¸ªæ¨¡æ¿:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">public class OkHttpDataFetcher implements DataFetcher&lt;EventResponse&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void loadData(DataCallback&lt;? super EventResponse&gt; callback) {}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public EventResponse executeData() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return null;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void cleanup() {}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void cancel() {}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Class&lt;EventResponse&gt; getDataClass() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return null;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>è™½ç„¶è¿™é‡Œæœ‰å¾ˆå¤šä¸ªæ–¹æ³•, ä½†å®ƒä»¬ä¸­çš„å¤§éƒ¨åˆ†éƒ½å¾ˆå®¹æ˜“å®ç°</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="getdataclass"></a>getDataClass<a class="hash-link" href="#getdataclass" title="Direct link to heading">#</a></h4><p><code>getDataClass</code> æ²¡ä»€ä¹ˆå¥½è®¨è®ºçš„, æˆ‘ä»¬è¦è¿”å› <code>EventResponse</code></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">@Override</span></span><span class="token-line" style="color:#393A34"><span class="token plain">public Class&lt;EventResponse&gt; getDataClass() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  return EventResponse.class;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="cancel"></a>cancel<a class="hash-link" href="#cancel" title="Direct link to heading">#</a></h4><p>å¯¹äºå¯ä»¥å–æ¶ˆçš„ç½‘ç»œè¿æ¥åº“æˆ–é•¿æ—¶é—´åŠ è½½, å¯ä»¥é€šè¿‡ cancel() æ–¹æ³•å®ç°. è¿™å°†å¸®åŠ©åŠ é€Ÿå…¶ä»–é˜Ÿåˆ—é‡Œçš„åŠ è½½, å¹¶èŠ‚çº¦ä¸€äº› CPU, å†…å­˜æˆ–å…¶ä»–èµ„æº, å¦‚æœæ²¡æœ‰éœ€è¦å–æ¶ˆçš„æ“ä½œ, å¯ä»¥ç•™ç©ºã€‚</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">@Override</span></span><span class="token-line" style="color:#393A34"><span class="token plain">public void cancel() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  // æ‰§è¡Œcancelæ“ä½œ, æˆ–æ¡ä»¶èµ‹å€¼</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  isCancelled = true;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="cleanup"></a>cleanup<a class="hash-link" href="#cleanup" title="Direct link to heading">#</a></h4><p>å¦‚æœä½ æ­£åœ¨åŠ è½½ä¸€ä¸ª <code>InputStream</code> æˆ–æ‰“å¼€ä»»ä½• I/O ç±»çš„èµ„æº, ä½ éœ€è¦è¦åœ¨ <code>cleanup()</code> æ–¹æ³•ä¸­å…³é—­å¹¶æ¸…ç†è¿™äº› <code>InputStream</code> æˆ–èµ„æº, å¦‚æœå¯¹åº”æ¨¡å—æ²¡æœ‰èµ„æºéœ€è¦æ¸…ç†, å¯ä»¥ç•™ç©º</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">@Override</span></span><span class="token-line" style="color:#393A34"><span class="token plain">public void cleanup() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (stream != null) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        try {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            stream.close();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        } catch (IOException e) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            // Ignore</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (urlConnection != null) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        urlConnection.disconnect();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    urlConnection = null;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="executedata"></a>executeData<a class="hash-link" href="#executedata" title="Direct link to heading">#</a></h4><p><code>executeData</code> æ˜¯æ¨¡å—ä¸­æ‰€æœŸå¾…ä½ åšé‚£äº›ç¹é‡å·¥ä½œçš„åœ°æ–¹, ä½ å¯ä»¥å¼€å¯ä¸€ä¸ªç½‘ç»œè¯·æ±‚, ä»ç£ç›˜åŠ è½½æ•°æ®, æˆ–åšä»»ä½•ä½ æƒ³åšçš„äº‹æƒ…. åœ¨å½“å‰å®šåˆ¶çš„æ¨¡å—ä¸­ä¸»è¦æ‰§è¡Œç½‘ç»œè¯·æ±‚å¹¶è¿”å›å¯¹åº”æ•°æ®.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">@Override</span></span><span class="token-line" style="color:#393A34"><span class="token plain">public EventResponse executeData() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    long startTime = LogTime.getLogTime();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    try {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return loadDataWithRedirects(new URL(eventUrl.toUrl()), 0, null, eventUrl.getHeaders());</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    } catch (IOException e) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (Log.isLoggable(TAG, Log.DEBUG)) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            Log.d(TAG, &quot;Failed to load data for url&quot;, e);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    } finally {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (Log.isLoggable(TAG, Log.VERBOSE)) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            Log.v(TAG, &quot;Finished http url fetcher fetch in &quot; + LogTime.getElapsedMillis(startTime));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return new EventResponse(false);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="loaddata"></a>loadData<a class="hash-link" href="#loaddata" title="Direct link to heading">#</a></h4><p><code>loadData</code> ä¸ <code>executeData</code> çš„åŒºåˆ«åœ¨äºæä¾›äº†ä¸€ä¸ª <code>DataCallback</code> å‚æ•°, ä½ å¯ä»¥å®‰æ’ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡,æˆ–åœ¨é‡Œé¢å®ç°çº¿ç¨‹åˆ‡æ¢ã€‚</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">@Override</span></span><span class="token-line" style="color:#393A34"><span class="token plain">public void loadData(DataCallback&lt;? super EventResponse&gt; callback) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    long startTime = LogTime.getLogTime();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    try {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        EventResponse result = loadDataWithRedirects(new URL(eventUrl.toUrl()), 0, null, eventUrl.getHeaders());</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        callback.onDataReady(result);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    } catch (IOException e) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (Log.isLoggable(TAG, Log.DEBUG)) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            Log.d(TAG, &quot;Failed to load data for url&quot;, e);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span></span><span class="token-line" style="color:#393A34"><span class="token plain">        callback.onLoadFailed(e);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    } finally {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (Log.isLoggable(TAG, Log.VERBOSE)) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            Log.v(TAG, &quot;Finished http url fetcher fetch in &quot; + LogTime.getElapsedMillis(startTime));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>å®Œæ•´çš„ <code>DataFetcher</code> å¯ä»¥å‚è€ƒ <a href="https://github.com/growingio/growingio-sdk-android-autotracker/blob/master/growingio-network/okhttp3/src/main/java/com/growingio/android/okhttp3/OkHttpDataFetcher.java" target="_blank" rel="noopener noreferrer">Github ä¸Šçš„ä»£ç </a></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="æ·»åŠ æ¨¡å—é…ç½®"></a>æ·»åŠ æ¨¡å—é…ç½®<a class="hash-link" href="#æ·»åŠ æ¨¡å—é…ç½®" title="Direct link to heading">#</a></h3><p>å¦‚æœæ¨¡å—é‡Œé¢æœ‰äº›é…ç½®æ˜¯éœ€è¦å¯¹å¤–å¼€æ”¾æ¥å£çš„ï¼Œé‚£å°±éœ€è¦é€šè¿‡è‡ªå®šä¹‰ä¸€ä¸ªé…ç½®ç±»å¼€æ”¾å‡ºå»ã€‚å¦‚ <code>OkhttpConfig</code>ï¼Œç»§æ‰¿ <code>Configurable</code> æ¥å£:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">public class OkhttpConfig implements Configurable {</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    private int connectTimeout = 5;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    private int readTimeout = 10;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    //æ¨èä½¿ç”¨å»ºé€ è€…æ¨¡å¼</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public OkhttpConfig setConnectTimeout(int connectTimeout) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.connectTimeout = connectTimeout;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return this;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    //æ¨èä½¿ç”¨å»ºé€ è€…æ¨¡å¼</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public OkhttpConfig setReadTimeout(int readTimeout) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.readTimeout = readTimeout;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return this;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public int getConnectTimeout() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return connectTimeout;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public int getReadTimeout() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return readTimeout;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>åç»­éœ€è¦å°†è¯¥é…ç½®ç±»é…ç½®åˆ°æ¨¡å—æ³¨è§£ä¸­ï¼Œè‡ªåŠ¨æ³¨å†Œå®Œæˆåç”Ÿæˆçš„ <code>&lt;Custom&gt;TackerConfiguration</code> ç±»ä¸­ä¼šè‡ªåŠ¨åŒ…å« <code>OkhttpConfig</code> ä¸­çš„é…ç½®æ–¹æ³•ä»¥ä¾¿ SDK åˆå§‹åŒ–æ—¶åŒæ—¶é…ç½®ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="æ·»åŠ æ¨¡å—æ³¨è§£"></a>æ·»åŠ æ¨¡å—æ³¨è§£<a class="hash-link" href="#æ·»åŠ æ¨¡å—æ³¨è§£" title="Direct link to heading">#</a></h3><p>æœ€åä¸€æ­¥æ˜¯å°†æ¨¡å—çš„ <code>Factory</code> ä¸è¾“å…¥è¾“å‡ºæ•°æ®ç»‘å®šä¸€èµ·ï¼Œæä¾›ç»™ <code>TrackerRegistry</code> æ³¨å†Œã€‚è¿™æ—¶å€™æœ‰ä¸¤ç§æƒ…å†µï¼šAppä¸»æ¨¡å—å’ŒLibraryå­æ¨¡å—</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="libraryæ¨¡å—ä¸­"></a>Libraryæ¨¡å—ä¸­<a class="hash-link" href="#libraryæ¨¡å—ä¸­" title="Direct link to heading">#</a></h4><p>ä½¿ç”¨ <code>@GIOLibraryModule</code> æ³¨è§£å’Œ <code>LibraryGioModule</code> é…åˆï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">@GIOLibraryModule(config = OkhttpConfig.class)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">public class OkhttpLibraryGioModule extends LibraryGioModule {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void registerComponents(Context context, TrackerRegistry registry) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        registry.register(EventUrl.class, EventResponse.class, new OkHttpDataLoader.Factory());</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><blockquote><p><code>@GIOLibraryModule</code> åœ¨é¡¹ç›®ä¸­çš„ Project Module ä¸­ä½¿ç”¨ï¼Œç»è¿‡ APT ç¼–è¯‘åæ¯ä¸€ä¸ª Project Module ä¸­éƒ½ä¼šç”Ÿæˆä¸€ä¸ªæœ‰ç€ <code>@Index</code> æ³¨è§£çš„ç±»ï¼Œè¯¥ç±»ä¼šè®°å½•å…¶ Module ä¸‹çš„æ‰€æœ‰<code>@GIOLibraryModule</code>ä¿¡æ¯ã€‚</p></blockquote><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="appä¸»æ¨¡å—ä¸­"></a>Appä¸»æ¨¡å—ä¸­<a class="hash-link" href="#appä¸»æ¨¡å—ä¸­" title="Direct link to heading">#</a></h4><p>éœ€è¦å°†æ¨¡å—æ”¾å…¥åˆ°ä¸»æ¨¡å—çš„æ³¨è§£ä¸­ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">@GIOAppModule(name = &quot;DemoAutotracker&quot;, configName = &quot;DemoTackerConfiguration&quot;,config = OkhttpConfig.class)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">public class GrowingIODemoAppModule extends AppGioModule {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @GIOTracker(path = Autotracker.class, projectId = &quot;&lt;your projectid&gt;&quot;, urlScheme = &quot;&lt;your urlscheme&gt;&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void config(DemoTackerConfiguration config) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        config.setChannel(&quot;demo&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                .setProject(&quot;&lt;your projectid&gt;&quot;,&quot;&lt;your urlscheme&gt;&quot;)//è‹¥åœ¨æ³¨è§£ä¸Šå£°æ˜å¯ä»¥çœç•¥</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                .setDataCollectionEnabled(true)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                .setDebugEnabled(true);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void registerComponents(Context context, TrackerRegistry registry) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        registry.register(EventUrl.class, EventResponse.class, new OkHttpDataLoader.Factory());</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="æ‰‹åŠ¨æ·»åŠ æ¨¡å—"></a>æ‰‹åŠ¨æ·»åŠ æ¨¡å—<a class="hash-link" href="#æ‰‹åŠ¨æ·»åŠ æ¨¡å—" title="Direct link to heading">#</a></h4><p>ä¸åŒäºä¸Šé¢ä¸¤ç§çš„è‡ªåŠ¨æ³¨å†Œï¼Œæ‰‹åŠ¨æ³¨å†Œæ˜¯åœ¨ SDK åˆå§‹åŒ–å®Œæˆåé€šè¿‡è°ƒç”¨ <code>registerComponent()</code> å®ç°</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">DemoAutotracker.start(this);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">//æ‰‹åŠ¨æ³¨å†Œæ¨¡å—å’Œé…ç½®ç±»</span></span><span class="token-line" style="color:#393A34"><span class="token plain">DemoAutotracker.get().registerComponent(new OkhttpLibraryGioModule());</span></span><span class="token-line" style="color:#393A34"><span class="token plain">ConfigurationProvider.get().addConfiguration(new OkhttpConfig());</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/master/website/docs/android/develop/custom module.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/growingio-sdk-docs/docs/android/develop/coutom sdk"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« è‡ªå®šä¹‰ SDK</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/growingio-sdk-docs/docs/android/develop/develop"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">äºŒæ¬¡å¼€å‘ Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#å¦‚ä½•è‡ªå®šä¹‰ä¸€ä¸ªæ¨¡å—" class="table-of-contents__link">å¦‚ä½•è‡ªå®šä¹‰ä¸€ä¸ªæ¨¡å—</a><ul><li><a href="#æ·»åŠ å¿…è¦çš„ä¾èµ–" class="table-of-contents__link">æ·»åŠ å¿…è¦çš„ä¾èµ–</a></li><li><a href="#ç¼–å†™ä¸€ä¸ªmodelloader" class="table-of-contents__link">ç¼–å†™ä¸€ä¸ªModelLoader</a></li><li><a href="#ç¼–å†™datafetcher" class="table-of-contents__link">ç¼–å†™DataFetcher</a></li><li><a href="#æ·»åŠ æ¨¡å—é…ç½®" class="table-of-contents__link">æ·»åŠ æ¨¡å—é…ç½®</a></li><li><a href="#æ·»åŠ æ¨¡å—æ³¨è§£" class="table-of-contents__link">æ·»åŠ æ¨¡å—æ³¨è§£</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/growingio-sdk-docs/docs">æ–‡æ¡£</a></li></ul></div><div class="col footer__col"><div class="footer__title">SDK</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/growingio/growingio-sdk-android-autotracker" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Android<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/growingio/growingio-sdk-ios-autotracker" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>iOS<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/growingio/growingio-sdk-js-autotracker" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Web<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://www.growingio.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>å®˜ç½‘<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a class="footer__link-item" href="/growingio-sdk-docs/blog">åšå®¢</a></li><li class="footer__item"><a href="https://github.com/growingio" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 åŒ—äº¬æ˜“æ•°ç§‘æŠ€æœ‰é™å…¬å¸ -- Built with Docusaurus.</div></div></div></footer></div>
<script src="/growingio-sdk-docs/assets/js/runtime~main.76f9e978.js"></script>
<script src="/growingio-sdk-docs/assets/js/main.3a3e87bf.js"></script>
</body>
</html>