<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-question docs-doc-id-common">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">SDK 共性问题 | 一站式数据增长引擎</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://growingio.github.io/growingio-sdk-docs/question/common"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-question-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-question-current"><meta data-rh="true" property="og:title" content="SDK 共性问题 | 一站式数据增长引擎"><meta data-rh="true" name="description" content="1. Release 版本与 Hotfix 版本怎么区别？"><meta data-rh="true" property="og:description" content="1. Release 版本与 Hotfix 版本怎么区别？"><link data-rh="true" rel="icon" href="/growingio-sdk-docs/img/favicon.png"><link data-rh="true" rel="canonical" href="https://growingio.github.io/growingio-sdk-docs/question/common"><link data-rh="true" rel="alternate" href="https://growingio.github.io/growingio-sdk-docs/question/common" hreflang="en"><link data-rh="true" rel="alternate" href="https://growingio.github.io/growingio-sdk-docs/question/common" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/growingio-sdk-docs/blog/rss.xml" title="一站式数据增长引擎 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/growingio-sdk-docs/blog/atom.xml" title="一站式数据增长引擎 Atom Feed"><link rel="stylesheet" href="/growingio-sdk-docs/assets/css/styles.8bae7ad5.css">
<link rel="preload" href="/growingio-sdk-docs/assets/js/runtime~main.7c750fab.js" as="script">
<link rel="preload" href="/growingio-sdk-docs/assets/js/main.2f12b7c5.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script>


<script src="https://growingio.atlassian.net/s/d41d8cd98f00b204e9800998ecf8427e-T/-dtzt95/b/3/c95134bc67d3a521bb3f4331beb9b804/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?jsI18nTransformer=existing&amp;locale=en-US&amp;collectorId=d067cced"></script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/growingio-sdk-docs/"><div class="navbar__logo"><img src="/growingio-sdk-docs/img/logo.svg" alt="GrowingIO Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/growingio-sdk-docs/img/logo_white.svg" alt="GrowingIO Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/growingio-sdk-docs/docs">文档</a><a class="navbar__item navbar__link" href="/growingio-sdk-docs/blog">博客</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/growingio-sdk-docs/question">常见问题</a></div><div class="navbar__items navbar__items--right"><a href="https://www.growingio.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">官网<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/growingio" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/growingio-sdk-docs/question">使用说明</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/growingio-sdk-docs/question/common">SDK 共性问题</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/growingio-sdk-docs/question/android">Android 常见问题</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/growingio-sdk-docs/question/ios">iOS 常见问题</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/growingio-sdk-docs/question/web-js">Web JS 常见问题</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/growingio-sdk-docs/question/minp">小程序 常见问题</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/growingio-sdk-docs/question/other">三方框架 常见问题</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/growingio-sdk-docs/question/server">服务端 常见问题</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/growingio-sdk-docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">SDK 共性问题</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>SDK 共性问题</h1></header><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-release-版本与-hotfix-版本怎么区别">1. Release 版本与 Hotfix 版本怎么区别？<a class="hash-link" href="#1-release-版本与-hotfix-版本怎么区别" title="Direct link to heading">​</a></h3><p><strong>A：</strong>release 版本是正式版本；例如：release-3.3.1；hotfix版本是非正式版本，是所在版本的 Bug 紧急修复版本；Android 的 hotfix 版本对应带有日期的SNAPSHOT版本，例如：release-3.2.3-09141-SNAPSHOT； 下一个release 版本会包含上个版本的所有 hotfix 版本的内容。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2--sdk-初始化参数-accountiddatasourceidhost-获取方式">2.  SDK 初始化参数 AccountID、DataSourceID、Host 获取方式<a class="hash-link" href="#2--sdk-初始化参数-accountiddatasourceidhost-获取方式" title="Direct link to heading">​</a></h3><p><strong>A：</strong>AccountID、DataSourceID需要在CDP增长平台上新建数据源，或从已创建的数据源中获取, 如不清楚或无权限请联系项目经理；操作步骤参考<a href="/growingio-sdk-docs/docs/android">帮助文档</a>。</p><p>Host需要服务端部署，如不清楚请联系该项目的运维或项目经理。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-sdk-集成成功但是数据库中没有查到sdk上报的数据">3. SDK 集成成功，但是数据库中没有查到SDK上报的数据？<a class="hash-link" href="#3-sdk-集成成功但是数据库中没有查到sdk上报的数据" title="Direct link to heading">​</a></h3><p><strong>A：</strong></p><ul><li>SDK 初始化参数 AccountID、DataSourceID、Host 填写是否正确；</li><li>Host 是否可以访问：在IP/域名后 加healthy-check 如果返回 OK 则表示可以访问，例如：<a href="http://cdp.growingio.com/healthy-check" target="_blank" rel="noopener noreferrer">http://cdp.growingio.com/healthy-check</a></li><li>web js sdk 默认不采集 localhost、127.0.0.1 页面数据；</li><li>服务端SDK， 如果Java SDK 运行模式，test:仅输出消息体，不发送消息，production: 发送消息；如果PHP SDK，初始化时 debug 配置为 true ，仅输出消息体，不发送消息。</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-访问事件的计算口径是什么各端的session周期是怎样的">4. 访问事件的计算口径是什么，各端的Session周期是怎样的？<a class="hash-link" href="#4-访问事件的计算口径是什么各端的session周期是怎样的" title="Direct link to heading">​</a></h3><p><strong>A：</strong> Session 由各端SDK维护
Web端：首次访问时生成 session，当用户30分钟内无操作行为，之后有操作行为，刷新 session。<br>
移动端：冷启动时生成 session，当App进入后台30秒后再次启动，刷新session。<br>
小程序：冷启动时生成 session，当小程序进入后台5分钟后再次启动，刷新session。<br></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="5-页面浏览事件的生成时机口径是什么">5. 页面浏览事件的生成时机口径是什么？<a class="hash-link" href="#5-页面浏览事件的生成时机口径是什么" title="Direct link to heading">​</a></h3><p><strong>A：</strong>页面的一次浏览行为，通过Page事件来统计的</p><ul><li>H5、Web：集成代码中的gdp(&#x27;send&#x27;), 监听history及hashtag</li><li>小程序：onShow</li><li>APP：安卓：onResume</li><li>iOS：viewDidAppear</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="6-采集数据接收的服务器即host停掉之后移动端采集到的数据会存多长时间呢其他端的数据是否直接就丢掉了">6. 采集数据接收的服务器(即Host)停掉之后，移动端采集到的数据会存多长时间呢。其他端的数据是否直接就丢掉了？<a class="hash-link" href="#6-采集数据接收的服务器即host停掉之后移动端采集到的数据会存多长时间呢其他端的数据是否直接就丢掉了" title="Direct link to heading">​</a></h3><p><strong>A：</strong>各端SDK侧存储时间：</p><ul><li>Android 2.0/3.0 7天</li><li>iOS 3.0 7天</li><li>iOS 2.0 持久化存储不做删除</li><li>Web 小程序 没有持久化</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="7-gio帮助文档有英文版吗">7. GIO帮助文档有英文版吗？<a class="hash-link" href="#7-gio帮助文档有英文版吗" title="Direct link to heading">​</a></h3><p><strong>A：</strong> 目前帮助文档还未提供英文版，产品英文版本已经在 2.2 版本上支持</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="8-gio各端sdk采集数据的发送数据策略是怎样的">8. GIO各端SDK采集数据的发送数据策略是怎样的？<a class="hash-link" href="#8-gio各端sdk采集数据的发送数据策略是怎样的" title="Direct link to heading">​</a></h3><p><strong>A：</strong>
发送数据策略：<br>
WeB JS SDK: 采集数据发送策略为实时上报，即事件生成即向服务器发送请求。<br>
小程序SDK：采集数据发送策略采用节流技术，即设置执行周期为1秒，只有在大于等于执行周期时才向服务器发送请求，执行周期内调用不发送。<br>
iOS 和Android SDK：以每隔默认时间15秒的情况下向服务器发送事件包（最大500条事件）。<br>
发送失败处理策略：<br>
iOS 和Android失败后数据还在数据库中会再次发送请求；web 和小程序会一直重发；<br>
服务端SDK，请求失败后数据直接丢弃。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="9-埋点和无埋点区别是什么为什么要有埋点sdk和无埋点sdk">9. 埋点和无埋点区别是什么？为什么要有埋点SDK和无埋点SDK？<a class="hash-link" href="#9-埋点和无埋点区别是什么为什么要有埋点sdk和无埋点sdk" title="Direct link to heading">​</a></h3><p><strong>A:</strong> 埋点和无埋点是业界常见的两种数据采集方式；</p><ul><li>埋点采集属于主观数据采集，采集的范围、口径具有主观性
优点是数据质量稳定，适合用于指标长期监测 （数据准确）
缺点是由于实施过程中的主观性，经常导致漏埋、时机不对、参数不对等因素导致数据质量问题，需要大量的数据稽核（体现在指标梳理和数据校验）</li><li>无埋点采集属于客观采集，采集的范围、口径不受主观因素影响
优点是数据采集全面，无需提前设计，适合短期数据（如投放页、活动页）的采集监测，后期运营业务人员通过界面圈选定义即可分析使用，实施工作量低，也因为客观性适合用于做机器学习的行为特征使用
缺点是数据不受主观因素控制，与开发技术框架关连比较紧密，采集的数据价值密度低（和业务相关性低；目前支持的有原生 Android、iOS、小程序、Web）</li><li>无埋点SDK是包含埋点SDK全部功能的；区别在于是否支持无埋点数据采集；</li><li>埋点SDK默认仅自动采集预定义的访问量、访问属性数据。行为数据、业务数据需要通过埋点采集实现。（事件：VISIT、CUSTOM、LOGIN_USER_ATTRIBUTES、APP_CLOSED）</li><li>无埋点SDK是全量自动采集用户行为数据，同时包含埋点SDK；（事件：VISIT、CUSTOM、LOGIN_USER_ATTRIBUTES、APP_CLOSED、PAGE、VIEW_CLICK、FROM_SUBMIT）</li><li>无埋点SDK接入简单，只需要开人员发引入SDK，完成初始化，就可以全量的采集用户行为数据。适用于全量的，初期的分析数据采集。后期有自己的一套埋点采集方案，再加入埋点也是支持的。</li><li>埋点SDK具有针对性的数据采集，适合有一整套埋点方案体系的专业分析。这样采集的数据更干净、准确、具有分析的针对性；采集数据量相对少，可减少服务器成本。</li><li>对于一些使用第三方框架开发的APP，由于暂不支持无埋点采集，原生部分需要使用埋点SDK，第三方框架中使用对应的第三方SDK，也可以自定义适配插件，支持第三方框架的数据采集。</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="10-客户端sdk-deviceid-生成机制简要逻辑是什么">10. 客户端SDK DeviceID 生成机制简要逻辑是什么？<a class="hash-link" href="#10-客户端sdk-deviceid-生成机制简要逻辑是什么" title="Direct link to heading">​</a></h3><p><strong>A:</strong></p><ul><li>iOS： IDFA &gt; IDFV &gt; 随机访问用户ID</li><li>Android：androidId  &gt; imei &gt; 随机访问用户ID </li><li>小程序：OpenID &gt; 随机访问用户ID</li><li>Web: 随机访问用户ID</li></ul><p>访问用户ID 的生成时机是在SDK初始化时。<br>
iOS设备如果想要使用IDFA作为访问用户ID，需要在用户授权获取到之后初始化SDK；如果拒绝授权，iOS 按照优先级 IDFV &gt; 随机访问用户ID, 生成访问用户ID  DeviceID；Keychain存储，删掉应用后再次安装还是同一个DeviceID。</p><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">NSString </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">deviceId</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NSUUID </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">uuid </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">NSUUID </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> SEL</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">sharedManager methodForSelector</span><span class="token operator" style="color:#393A34">:</span><span class="token plain">advertisingIdentifierSelector</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sharedManager</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> advertisingIdentifierSelector</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deviceId </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">uuid UUIDString</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deviceId </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">UIDevice currentDevice</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> identifierForVendor</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> UUIDString</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deviceId </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">NSUUID UUID</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> UUIDString</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Android 设备首先会获取AndroidID，如果AndroidID 为空或为“9774d56d682e549c”(山寨机或其他设备)，会通过用户授权获取IMEI，如果IMEI获取不到，会随机访问用户ID  作为DeviceID。本地文件存储，删掉应用后再次按照逻辑生成可能会不一样。</p><div class="language-Java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-Java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">String deviceId = null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">String adId = getAndroidId();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deviceId = UUID.nameUUIDFromBytes(adId.getBytes(Charset.forName(&quot;UTF-8&quot;))).toString();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">String imi = getImei();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deviceId = UUID.nameUUIDFromBytes(imi.getBytes(Charset.forName(&quot;UTF-8&quot;))).toString();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deviceId = UUID.randomUUID().toString();</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>小程序：如果SDK设置了强制登录模式，小程序打开时调用 wx.login 获取openid或unionId，且调用 identify 上报openid，会使用 openid 作为 DeviceID ，否则会自动生成 随机访问用户ID 作为 DeviceID。存储在 storage 里面，删除小程序再次进入 DeviceID 会改变（DeviceID不是 openid的情况下）。参考<a href="/growingio-sdk-docs/docs/miniprogram/3.3/initSettings#forcelogin">强制登录模式</a></p><p>Web: 随机访问用户ID  存储在 localStorage 中，永久有效。<br>
这样复杂逻辑的目的是尽量使用 DeviceID 标识唯一一台设备，将同一台设备上的访问用户标识为同一个用户。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="11-移动端-sdk-20升30版本sdk-与-20sdk30sdk的关系是什么">11. 移动端 SDK 2.0升3.0版本SDK 与 2.0SDK、3.0SDK的关系是什么？<a class="hash-link" href="#11-移动端-sdk-20升30版本sdk-与-20sdk30sdk的关系是什么" title="Direct link to heading">​</a></h3><p><strong>A:</strong>
2.0升3.0版本SDK autotracker-upgrade (仅无埋点SDK，埋点暂不兼容) 是对 3.0 SDK API进行封装 ，实现  2.0 SDK API 可以调用 3.0 SDK API。</p><picture><source srcset="/growingio-sdk-docs/img/question/2update3.avif" type="image/avif"><source srcset="/growingio-sdk-docs/img/question/2update3.webp" type="image/webp"><img src="/growingio-sdk-docs/img/question/2update3.png"></picture><p>使用：集成 2.0升3.0版本SDK + 3.0 SDK<br>
测量协议：2.0升3.0版本SDK  按照3.0的测量协议发送数据<br>
补充：<a href="/growingio-sdk-docs/docs#%E5%B9%B3%E5%8F%B0%E6%94%AF%E6%8C%81%E5%8A%9F%E8%83%BD%E7%9A%84%E7%89%88%E6%9C%AC%E4%B8%8E-sdk%E7%89%88%E6%9C%AC%E5%AF%B9%E5%BA%94%E5%85%B3%E7%B3%BB">3.0 SDK 版本与 CDP 平台支持功能对应关系</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="12-客户端-sdk-path-值的生成逻辑是什么">12. 客户端 SDK path 值的生成逻辑是什么？<a class="hash-link" href="#12-客户端-sdk-path-值的生成逻辑是什么" title="Direct link to heading">​</a></h3><p><strong>A:</strong></p><ul><li>Web： 如果设置 hashtag 为 true时，hashtag会作为 path的一部分 <br>
如URL：<a href="https://blog.growingio.com/posts/search?keywords=data" target="_blank" rel="noopener noreferrer">https://blog.growingio.com/posts/search?keywords=data</a><br>
字段和值： domain: blog.growingio.com；<br>   path:/posts/search； <br>  query: keywords=data</li><li>小程序：
&quot;path&quot;: &quot;pages/index/index&quot;
逻辑：从 page目录 至显示页面的目录嵌套路径。</li><li>iOS：
&quot;path&quot; : &quot;/UITabBarController/UINavigationController<!-- -->[1]<!-- -->/ViewController<!-- -->[0]<!-- -->&quot;<br>
逻辑：从根 Controller到当前展示 Controller 的嵌套路径，  <!-- -->[1]<!-- -->:表示有多个 Controller 时 给Controller 分配的编号。</li><li>Android：
&quot;path&quot;: &quot;/NestedFragmentActivity/GreenFragment<!-- -->[fragment1]<!-- -->&quot;<br>
逻辑：从根Activity到当前展示 Fragment 的嵌套路径， <!-- -->[fragment1]<!-- -->:表示 给Fragment 设置分配的tag
内嵌H5页面：内嵌H5 页面的 path 的生成逻辑和Web 的 path 生成逻辑相同。</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="13sdk-数据加密压缩传输是怎么实现的">13.SDK 数据加密压缩传输是怎么实现的？<a class="hash-link" href="#13sdk-数据加密压缩传输是怎么实现的" title="Direct link to heading">​</a></h3><p><strong>A:</strong>
数据加密压缩传输是SDK在发送数据请求时对数据进行加密压缩，在请求头中设置压缩和加密标记；服务端收到请求后根据请求头标记自动选择对应的解密和解压缩方式对数据进行处理。<br>
对SDK 日志中的数据和数据端数据库中查询到的数据没有影响。<br>
使用抓包工具，看到的数据将是密文数据。<br>
注：数据格式 JSON 和 Protobuf  都可加密压缩<br>
<strong>加密算法:</strong> VDS_XOR<br>
xor_code stm的16进制的最后一个字节( xor_code = stm&amp;0xff), 对压缩的内容按字节XOR(xor_code)
数据处理前处理方式：SendData = Encode(Crypt(Compress(Data)))<br>
<strong>优势</strong><br>
数据加密增强一定的数据安全性，数据压缩可以节省一部分用户流量<br>
<strong>劣势</strong><br>
会增加加密压缩的计算开销</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/growingio/growingio-sdk-docs/edit/master/question/common.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-08-17T02:29:03.000Z">Aug 17, 2023</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/growingio-sdk-docs/question"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">使用说明</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/growingio-sdk-docs/question/android"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Android 常见问题</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-release-版本与-hotfix-版本怎么区别" class="table-of-contents__link toc-highlight">1. Release 版本与 Hotfix 版本怎么区别？</a></li><li><a href="#2--sdk-初始化参数-accountiddatasourceidhost-获取方式" class="table-of-contents__link toc-highlight">2.  SDK 初始化参数 AccountID、DataSourceID、Host 获取方式</a></li><li><a href="#3-sdk-集成成功但是数据库中没有查到sdk上报的数据" class="table-of-contents__link toc-highlight">3. SDK 集成成功，但是数据库中没有查到SDK上报的数据？</a></li><li><a href="#4-访问事件的计算口径是什么各端的session周期是怎样的" class="table-of-contents__link toc-highlight">4. 访问事件的计算口径是什么，各端的Session周期是怎样的？</a></li><li><a href="#5-页面浏览事件的生成时机口径是什么" class="table-of-contents__link toc-highlight">5. 页面浏览事件的生成时机口径是什么？</a></li><li><a href="#6-采集数据接收的服务器即host停掉之后移动端采集到的数据会存多长时间呢其他端的数据是否直接就丢掉了" class="table-of-contents__link toc-highlight">6. 采集数据接收的服务器(即Host)停掉之后，移动端采集到的数据会存多长时间呢。其他端的数据是否直接就丢掉了？</a></li><li><a href="#7-gio帮助文档有英文版吗" class="table-of-contents__link toc-highlight">7. GIO帮助文档有英文版吗？</a></li><li><a href="#8-gio各端sdk采集数据的发送数据策略是怎样的" class="table-of-contents__link toc-highlight">8. GIO各端SDK采集数据的发送数据策略是怎样的？</a></li><li><a href="#9-埋点和无埋点区别是什么为什么要有埋点sdk和无埋点sdk" class="table-of-contents__link toc-highlight">9. 埋点和无埋点区别是什么？为什么要有埋点SDK和无埋点SDK？</a></li><li><a href="#10-客户端sdk-deviceid-生成机制简要逻辑是什么" class="table-of-contents__link toc-highlight">10. 客户端SDK DeviceID 生成机制简要逻辑是什么？</a></li><li><a href="#11-移动端-sdk-20升30版本sdk-与-20sdk30sdk的关系是什么" class="table-of-contents__link toc-highlight">11. 移动端 SDK 2.0升3.0版本SDK 与 2.0SDK、3.0SDK的关系是什么？</a></li><li><a href="#12-客户端-sdk-path-值的生成逻辑是什么" class="table-of-contents__link toc-highlight">12. 客户端 SDK path 值的生成逻辑是什么？</a></li><li><a href="#13sdk-数据加密压缩传输是怎么实现的" class="table-of-contents__link toc-highlight">13.SDK 数据加密压缩传输是怎么实现的？</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/growingio-sdk-docs/docs">文档</a></li></ul></div><div class="col footer__col"><div class="footer__title">SDK</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/growingio/growingio-sdk-android-autotracker" target="_blank" rel="noopener noreferrer" class="footer__link-item">Android<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/growingio/growingio-sdk-ios-autotracker" target="_blank" rel="noopener noreferrer" class="footer__link-item">iOS<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/growingio/growingio-sdk-webjs-autotracker/tree/CDP" target="_blank" rel="noopener noreferrer" class="footer__link-item">Web<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.growingio.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">官网<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/growingio-sdk-docs/blog">博客</a></li><li class="footer__item"><a href="https://github.com/growingio" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 北京易数科技有限公司 -- Built with Docusaurus.</div></div></div></footer></div>
<script src="/growingio-sdk-docs/assets/js/runtime~main.7c750fab.js"></script>
<script src="/growingio-sdk-docs/assets/js/main.2f12b7c5.js"></script>
</body>
</html>